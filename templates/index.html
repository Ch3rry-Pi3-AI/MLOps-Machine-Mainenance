<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}" />
  <title>Machine Efficiency Prediction</title>
</head>
<body>
  <div class="page">
    <div class="overlay"></div>

    <header class="header">
      <h1 class="title">Smart Manufacturing — Efficiency Prediction</h1>
      <p class="subtitle">Enter machine and context parameters below to estimate efficiency status.</p>
    </header>

    <main class="card">
      <form method="post" class="form-grid">
        <!-- Operation Mode (Dropdown, mapped to encoder) -->
        <div class="form-field">
          <label for="Operation_Mode">Operation Mode</label>
          <select id="Operation_Mode" name="Operation_Mode">
            {% for mode in op_modes %}
              <option value="{{ mode }}" {% if defaults['Operation_Mode'] == mode %}selected{% endif %}>{{ mode }}</option>
            {% endfor %}
          </select>
          <small class="hint">Select current machine mode.</small>
        </div>

        <!-- Numeric inputs -->
        <div class="form-field">
          <label for="Predictive_Maintenance_Score">Predictive Maintenance Score</label>
          <input
            type="number"
            id="Predictive_Maintenance_Score"
            name="Predictive_Maintenance_Score"
            step="0.1" min="0" max="100"
            value="{{ defaults['Predictive_Maintenance_Score'] }}" />
          <small class="hint">0–100 health score (higher is healthier).</small>
        </div>

        <div class="form-field">
          <label for="Temperature_C">Temperature (°C)</label>
          <input
            type="number"
            id="Temperature_C"
            name="Temperature_C"
            step="0.1" min="-20" max="200"
            value="{{ defaults['Temperature_C'] }}" />
        </div>

        <div class="form-field">
          <label for="Vibration_Hz">Vibration (Hz)</label>
          <input
            type="number"
            id="Vibration_Hz"
            name="Vibration_Hz"
            step="0.1" min="0" max="500"
            value="{{ defaults['Vibration_Hz'] }}" />
        </div>

        <div class="form-field">
          <label for="Power_Consumption_kW">Power Consumption (kW)</label>
          <input
            type="number"
            id="Power_Consumption_kW"
            name="Power_Consumption_kW"
            step="0.1" min="0" max="500"
            value="{{ defaults['Power_Consumption_kW'] }}" />
        </div>

        <div class="form-field">
          <label for="Network_Latency_ms">Network Latency (ms)</label>
          <input
            type="number"
            id="Network_Latency_ms"
            name="Network_Latency_ms"
            step="0.1" min="0" max="1000"
            value="{{ defaults['Network_Latency_ms'] }}" />
        </div>

        <div class="form-field">
          <label for="Packet_Loss_%">Packet Loss (%)</label>
          <input
            type="number"
            id="Packet_Loss_%"
            name="Packet_Loss_%"
            step="0.01" min="0" max="100"
            value="{{ defaults['Packet_Loss_%'] }}" />
        </div>

        <div class="form-field">
          <label for="Quality_Control_Defect_Rate_%">QC Defect Rate (%)</label>
          <input
            type="number"
            id="Quality_Control_Defect_Rate_%"
            name="Quality_Control_Defect_Rate_%"
            step="0.01" min="0" max="100"
            value="{{ defaults['Quality_Control_Defect_Rate_%'] }}" />
        </div>

        <div class="form-field">
          <label for="Production_Speed_units_per_hr">Production Speed (units/hr)</label>
          <input
            type="number"
            id="Production_Speed_units_per_hr"
            name="Production_Speed_units_per_hr"
            step="1" min="0" max="100000"
            value="{{ defaults['Production_Speed_units_per_hr'] }}" />
        </div>

        <div class="form-field">
          <label for="Error_Rate_%">Error Rate (%)</label>
          <input
            type="number"
            id="Error_Rate_%"
            name="Error_Rate_%"
            step="0.01" min="0" max="100"
            value="{{ defaults['Error_Rate_%'] }}" />
        </div>

        <!-- Date/time features -->
        <div class="form-field">
          <label for="Year">Year</label>
          <input type="number" id="Year" name="Year" step="1" min="2000" max="2100" value="{{ defaults['Year'] }}" />
        </div>

        <div class="form-field">
          <label for="Month">Month</label>
          <input type="number" id="Month" name="Month" step="1" min="1" max="12" value="{{ defaults['Month'] }}" />
        </div>

        <div class="form-field">
          <label for="Day">Day</label>
          <input type="number" id="Day" name="Day" step="1" min="1" max="31" value="{{ defaults['Day'] }}" />
        </div>

        <div class="form-field">
          <label for="Hour">Hour</label>
          <input type="number" id="Hour" name="Hour" step="1" min="0" max="23" value="{{ defaults['Hour'] }}" />
        </div>

        <div class="actions">
          <button type="submit">Predict Efficiency</button>
        </div>
      </form>

      {% if prediction %}
        <div class="result">
          <span class="badge">Prediction</span>
          <h2 class="prediction">{{ prediction }}</h2>
        </div>
      {% endif %}
    </main>

    <footer class="footer">
      <small>© {{ defaults['Year'] }} • MLOps Machine Maintenance</small>
    </footer>
  </div>
</body>
</html>
